<!doctype html>
<head><meta charset="utf-8">
<title>Promise.any</title><script type="application/json" id="menu-search-biblio">[{"type":"clause","id":"intro","aoid":null,"title":"Introduction","titleHTML":"Introduction","number":"","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"Introduction"},{"type":"table","id":"table-7","number":1,"caption":"Table 1: Well-Known Intrinsic Objects","referencingIds":["_ref_0"],"namespace":"https://tc39.es/proposal-promise-any/","location":"","key":"Table 1: Well-Known Intrinsic Objects"},{"type":"clause","id":"sec-well-known-intrinsic-objects","aoid":null,"title":"Well-Known Intrinsic Objects","titleHTML":"Well-Known Intrinsic Objects","number":"1","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"Well-Known Intrinsic Objects"},{"type":"clause","id":"sec-properties-of-error-instances","aoid":null,"title":"Properties of Error Instances","titleHTML":"Properties of Error Instances","number":"2.1","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"Properties of Error Instances"},{"type":"clause","id":"sec-native-error-types-used-in-this-standard","aoid":null,"title":"Native Error Types Used in This Standard","titleHTML":"Native Error Types Used in This Standard","number":"2.2","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":["_ref_2","_ref_5"],"key":"Native Error Types Used in This Standard"},{"type":"clause","id":"sec-properties-of-nativeerror-instances","aoid":null,"title":"Properties of NativeError Instances","titleHTML":"Properties of <var>NativeError</var> Instances","number":"2.3.1","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"Properties of NativeError Instances"},{"type":"clause","id":"sec-nativeerror-object-structure","aoid":null,"title":"NativeError Object Structure","titleHTML":"<var>NativeError</var> Object Structure","number":"2.3","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":["_ref_4"],"key":"NativeError Object Structure"},{"type":"term","term":"%AggregateError%","refId":"sec-aggregate-error-constructor","referencingIds":[],"namespace":"https://tc39.es/proposal-promise-any/","location":"","key":"%AggregateError%"},{"type":"clause","id":"sec-aggregate-error","aoid":null,"title":"AggregateError ( errors, message )","titleHTML":"AggregateError ( <var>errors</var>, <var>message</var> )","number":"2.4.1.1","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"AggregateError ( errors, message )"},{"type":"clause","id":"sec-aggregate-error-constructor","aoid":null,"title":"The AggregateError Constructor","titleHTML":"The AggregateError Constructor","number":"2.4.1","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":["_ref_1","_ref_7","_ref_8","_ref_10","_ref_18"],"key":"The AggregateError Constructor"},{"type":"clause","id":"sec-aggregate-error.prototype","aoid":null,"title":"AggregateError.prototype","titleHTML":"AggregateError.prototype","number":"2.4.2.1","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"AggregateError.prototype"},{"type":"clause","id":"sec-properties-of-the-aggregate-error-constructors","aoid":null,"title":"Properties of the AggregateError Constructor","titleHTML":"Properties of the AggregateError Constructor","number":"2.4.2","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"Properties of the AggregateError Constructor"},{"type":"term","term":"%AggregateError.prototype%","refId":"sec-properties-of-the-aggregate-error-prototype-objects","referencingIds":[],"namespace":"https://tc39.es/proposal-promise-any/","location":"","key":"%AggregateError.prototype%"},{"type":"clause","id":"sec-aggregate-error.prototype.constructor","aoid":null,"title":"AggregateError.prototype.constructor","titleHTML":"AggregateError.prototype.constructor","number":"2.4.3.1","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"AggregateError.prototype.constructor"},{"type":"clause","id":"sec-aggregate-error.prototype.message","aoid":null,"title":"AggregateError.prototype.message","titleHTML":"AggregateError.prototype.message","number":"2.4.3.2","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"AggregateError.prototype.message"},{"type":"clause","id":"sec-aggregate-error.prototype.name","aoid":null,"title":"AggregateError.prototype.name","titleHTML":"AggregateError.prototype.name","number":"2.4.3.3","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"AggregateError.prototype.name"},{"type":"clause","id":"sec-properties-of-the-aggregate-error-prototype-objects","aoid":null,"title":"Properties of the AggregateError Prototype Object","titleHTML":"Properties of the AggregateError Prototype Object","number":"2.4.3","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":["_ref_9","_ref_17"],"key":"Properties of the AggregateError Prototype Object"},{"type":"clause","id":"sec-properties-of-aggregate-error-instances","aoid":null,"title":"Properties of AggregateError Instances","titleHTML":"Properties of AggregateError Instances","number":"2.4.4","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"Properties of AggregateError Instances"},{"type":"clause","id":"sec-aggregate-error-objects","aoid":null,"title":"AggregateError Objects","titleHTML":"AggregateError Objects","number":"2.4","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":["_ref_3"],"key":"AggregateError Objects"},{"type":"clause","id":"sec-error-objects","aoid":null,"title":"Error Objects","titleHTML":"Error Objects","number":"2","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"Error Objects"},{"type":"op","aoid":"PerformPromiseAny","refId":"sec-performpromiseany","location":"","referencingIds":[],"key":"PerformPromiseAny"},{"type":"clause","id":"sec-performpromiseany","aoid":"PerformPromiseAny","title":"Runtime Semantics: PerformPromiseAny ( iteratorRecord, constructor, resultCapability, promiseResolve )","titleHTML":"Runtime Semantics: PerformPromiseAny ( <var>iteratorRecord</var>, <var>constructor</var>, <var>resultCapability</var>, <var>promiseResolve</var> )","number":"3.1","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":["_ref_23"],"key":"Runtime Semantics: PerformPromiseAny ( iteratorRecord, constructor, resultCapability, promiseResolve )"},{"type":"clause","id":"sec-promise.any-reject-element-functions","aoid":null,"title":"Promise.any Reject Element Functions","titleHTML":"<code>Promise.any</code> Reject Element Functions","number":"3.2","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":["_ref_6"],"key":"Promise.any Reject Element Functions"},{"type":"clause","id":"sec-promise.any","aoid":null,"title":"Promise.any ( iterable )","titleHTML":"Promise.any ( <var>iterable</var> )","number":"3","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":[],"key":"Promise.any ( iterable )"},{"type":"op","aoid":"IterableToList","refId":"sec-iterabletolist","location":"","referencingIds":[],"key":"IterableToList"},{"type":"clause","id":"sec-iterabletolist","aoid":"IterableToList","title":"Runtime Semantics: IterableToList ( items [ , method ] )","titleHTML":"Runtime Semantics: IterableToList ( <var>items</var> <ins>[ ,</ins> <var>method</var><ins> ]</ins> )","number":"4","namespace":"https://tc39.es/proposal-promise-any/","location":"","referencingIds":["_ref_14"],"key":"Runtime Semantics: IterableToList ( items [ , method ] )"}]</script></head><body><div id="menu-toggle">☰</div><div id="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins</div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#intro" title="Introduction">Introduction</a></li><li><span class="item-toggle-none"></span><a href="#sec-well-known-intrinsic-objects" title="Well-Known Intrinsic Objects"><span class="secnum">1</span> Well-Known Intrinsic Objects</a></li><li><span class="item-toggle">◢</span><a href="#sec-error-objects" title="Error Objects"><span class="secnum">2</span> Error Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-properties-of-error-instances" title="Properties of Error Instances"><span class="secnum">2.1</span> Properties of Error Instances</a></li><li><span class="item-toggle-none"></span><a href="#sec-native-error-types-used-in-this-standard" title="Native Error Types Used in This Standard"><span class="secnum">2.2</span> Native Error Types Used in This Standard</a></li><li><span class="item-toggle">◢</span><a href="#sec-nativeerror-object-structure" title="NativeError Object Structure"><span class="secnum">2.3</span> <var>NativeError</var> Object Structure</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-properties-of-nativeerror-instances" title="Properties of NativeError Instances"><span class="secnum">2.3.1</span> Properties of <var>NativeError</var> Instances</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-aggregate-error-objects" title="AggregateError Objects"><span class="secnum">2.4</span> AggregateError Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-aggregate-error-constructor" title="The AggregateError Constructor"><span class="secnum">2.4.1</span> The AggregateError Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-aggregate-error" title="AggregateError ( errors, message )"><span class="secnum">2.4.1.1</span> AggregateError ( <var>errors</var>, <var>message</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-the-aggregate-error-constructors" title="Properties of the AggregateError Constructor"><span class="secnum">2.4.2</span> Properties of the AggregateError Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-aggregate-error.prototype" title="AggregateError.prototype"><span class="secnum">2.4.2.1</span> AggregateError.prototype</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-the-aggregate-error-prototype-objects" title="Properties of the AggregateError Prototype Object"><span class="secnum">2.4.3</span> Properties of the AggregateError Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-aggregate-error.prototype.constructor" title="AggregateError.prototype.constructor"><span class="secnum">2.4.3.1</span> AggregateError.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-aggregate-error.prototype.message" title="AggregateError.prototype.message"><span class="secnum">2.4.3.2</span> AggregateError.prototype.message</a></li><li><span class="item-toggle-none"></span><a href="#sec-aggregate-error.prototype.name" title="AggregateError.prototype.name"><span class="secnum">2.4.3.3</span> AggregateError.prototype.name</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-aggregate-error-instances" title="Properties of AggregateError Instances"><span class="secnum">2.4.4</span> Properties of AggregateError Instances</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-promise.any" title="Promise.any ( iterable )"><span class="secnum">3</span> Promise.any ( <var>iterable</var> )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-performpromiseany" title="Runtime Semantics: PerformPromiseAny ( iteratorRecord, constructor, resultCapability, promiseResolve )"><span class="secnum">3.1</span> RS: PerformPromiseAny ( <var>iteratorRecord</var>, <var>constructor</var>, <var>resultCapability</var>, <var>promiseResolve</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-promise.any-reject-element-functions" title="Promise.any Reject Element Functions"><span class="secnum">3.2</span> <code>Promise.any</code> Reject Element Functions</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-iterabletolist" title="Runtime Semantics: IterableToList ( items [ , method ] )"><span class="secnum">4</span> RS: IterableToList ( <var>items</var> <ins>[ ,</ins> <var>method</var><ins> ]</ins> )</a></li></ol></div></div><div id="spec-container"><h1 class="version first">Stage 4 Draft / August 10, 2020</h1><h1 class="title">Promise.any</h1>
<style>
  aside {
    background: yellow;
    padding: 1rem;
    font-size: 200%;
  }
</style>
<script src="ecmarkup.js" defer=""></script>
<link rel="stylesheet" href="ecmarkup.css">
<aside><strong>Note:</strong> This proposal has been integrated into <a href="https://tc39.es/ecma262/">the upstream ECMAScript specification</a> — please update your references to point there. This snapshot is only kept for historical purposes.</aside>
<emu-intro id="intro">
  <h1>Introduction</h1>
  <p><code>Promise.any()</code> accepts an iterable of promises and returns a promise that is fulfilled by the first given promise to be fulfilled, or rejected with an <code>AggregateError</code> holding the rejection reasons if all of the given promises are rejected.</p>
</emu-intro>

<emu-clause id="sec-well-known-intrinsic-objects">
  <h1><span class="secnum">1</span> Well-Known Intrinsic Objects</h1>
  <p>Well-known intrinsics are built-in objects that are explicitly referenced by the algorithms of this specification and which usually have <emu-xref href="#realm"><a href="https://tc39.es/ecma262/#realm">realm</a></emu-xref>-specific identities. Unless otherwise specified each intrinsic object actually corresponds to a set of similar objects, one per <emu-xref href="#realm"><a href="https://tc39.es/ecma262/#realm">realm</a></emu-xref>.</p>
  <p>Within this specification a reference such as %name% means the intrinsic object, associated with the current <emu-xref href="#realm"><a href="https://tc39.es/ecma262/#realm">realm</a></emu-xref>, corresponding to the name. Determination of the current <emu-xref href="#realm"><a href="https://tc39.es/ecma262/#realm">realm</a></emu-xref> and its intrinsics is described in <emu-xref href="#sec-execution-contexts"><a href="https://tc39.es/ecma262/#sec-execution-contexts">8.3</a></emu-xref>. The well-known intrinsics are listed in <emu-xref href="#table-7" id="_ref_0"><a href="#table-7">Table 1</a></emu-xref>.</p>
  <emu-table id="table-7" caption="Well-Known Intrinsic Objects"><figure><figcaption>Table 1: Well-Known Intrinsic Objects</figcaption>
    <table>
      <tbody>
      <tr>
        <th>
          Intrinsic Name
        </th>
        <th>
          Global Name
        </th>
        <th>
          ECMAScript Language Association
        </th>
      </tr>
      <tr>
        <td>
          <ins><emu-xref href="#sec-aggregate-error-constructor" id="_ref_7"><a href="#sec-aggregate-error-constructor">%AggregateError%</a></emu-xref></ins>
        </td>
        <td>
          <ins><code>AggregateError</code></ins>
        </td>
        <td>
          <ins>The <code>AggregateError</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-aggregate-error-constructor" id="_ref_1"><a href="#sec-aggregate-error-constructor">2.4.1</a></emu-xref>)</ins>
        </td>
      </tr>
      <tr>
        <td>
          <ins>%AggregateErrorPrototype%</ins>
        </td>
        <td>
          <ins><code>AggregateError.prototype</code></ins>
        </td>
        <td>
          <ins>The initial value of the <code>prototype</code> <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">data property</a></emu-xref> of <emu-xref href="#sec-aggregate-error-constructor" id="_ref_8"><a href="#sec-aggregate-error-constructor">%AggregateError%</a></emu-xref>; i.e., <emu-xref href="#sec-properties-of-the-aggregate-error-prototype-objects" id="_ref_9"><a href="#sec-properties-of-the-aggregate-error-prototype-objects">%AggregateError.prototype%</a></emu-xref></ins>
        </td>
      </tr>
      </tbody>
    </table>
  </figure></emu-table>
</emu-clause>

<emu-clause id="sec-error-objects">
  <h1><span class="secnum">2</span> Error Objects</h1>
  <p>Instances of Error objects are thrown as exceptions when runtime errors occur. The Error objects may also serve as base objects for user-defined exception classes.</p>
  <p>When an ECMAScript implementation detects a runtime error, it throws a new instance of one of the <var>NativeError</var> objects defined in <emu-xref href="#sec-native-error-types-used-in-this-standard" id="_ref_2"><a href="#sec-native-error-types-used-in-this-standard">2.2</a></emu-xref> or a new instance of AggregateError object defined in <emu-xref href="#sec-aggregate-error-objects" id="_ref_3"><a href="#sec-aggregate-error-objects">2.4</a></emu-xref>. Each of these objects has the structure described below, differing only in the name used as the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> name instead of <var>NativeError</var>, in the <code>name</code> property of the prototype object, in the implementation-defined <code>message</code> property of the prototype object, and in the presence of the <emu-xref href="#sec-aggregate-error-constructor" id="_ref_10"><a href="#sec-aggregate-error-constructor">%AggregateError%</a></emu-xref>-specific <code>errors</code> property.</p>

  <emu-clause id="sec-properties-of-error-instances">
    <h1><span class="secnum">2.1</span> Properties of Error Instances</h1>
    <p>Error instances are ordinary objects that inherit properties from the Error prototype object and have an [[ErrorData]] internal slot whose value is <emu-val>undefined</emu-val>. The only specified uses of [[ErrorData]] is to identify Error<ins>, AggregateError,</ins> and <var>NativeError</var> instances as Error objects within <code>Object.prototype.toString</code>.</p>
  </emu-clause>

  <emu-clause id="sec-native-error-types-used-in-this-standard">
    <h1><span class="secnum">2.2</span> Native Error Types Used in This Standard</h1>
    <p>A new instance of one of the <var>NativeError</var> objects below or of the AggregateError object is thrown when a runtime error is detected. All of these objects share the same structure, as described in <emu-xref href="#sec-nativeerror-object-structure" id="_ref_4"><a href="#sec-nativeerror-object-structure">2.3</a></emu-xref>.</p>
  </emu-clause>

  <emu-clause id="sec-nativeerror-object-structure">
    <h1><span class="secnum">2.3</span> <var>NativeError</var> Object Structure</h1>
    <p>For each error object, references to <var>NativeError</var> in the definition should be replaced with the appropriate error object name from <emu-xref href="#sec-native-error-types-used-in-this-standard" id="_ref_5"><a href="#sec-native-error-types-used-in-this-standard">2.2</a></emu-xref>.</p>

    <emu-clause id="sec-properties-of-nativeerror-instances">
      <h1><span class="secnum">2.3.1</span> Properties of <var>NativeError</var> Instances</h1>
      <p><var>NativeError</var> instances are ordinary objects that inherit properties from their <var>NativeError</var> prototype object and have an [[ErrorData]] internal slot whose value is <emu-val>undefined</emu-val>. The only specified use of [[ErrorData]] is by <code>Object.prototype.toString</code> (<emu-xref href="#sec-object.prototype.tostring"><a href="https://tc39.es/ecma262/#sec-object.prototype.tostring">19.1.3.6</a></emu-xref>) to identify Error<ins>, AggregateError,</ins> or <var>NativeError</var> instances.</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-aggregate-error-objects">
    <h1><span class="secnum">2.4</span> AggregateError Objects</h1>

    <emu-clause id="sec-aggregate-error-constructor">
      <h1><span class="secnum">2.4.1</span> The AggregateError Constructor</h1>
      <p>The AggregateError <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>is the intrinsic object <dfn>%AggregateError%</dfn>.</li>
        <li>is the initial value of the <code>AggregateError</code> property of the <emu-xref href="#sec-global-object"><a href="https://tc39.es/ecma262/#sec-global-object">global object</a></emu-xref>.</li>
        <li>creates and initializes a new AggregateError object when called as a function rather than as a <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>. Thus the function call <code>AggregateError(…)</code> is equivalent to the object creation expression <code>new AggregateError(…)</code> with the same arguments.</li>
        <li>is designed to be subclassable. It may be used as the value of an <code>extends</code> clause of a class definition. Subclass constructors that intend to inherit the specified AggregateError behaviour must include a <code>super</code> call to the AggregateError <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> to create and initialize subclass instances with an [[ErrorData]] and [[AggregateErrors]] internal slots.</li>
      </ul>

      <emu-clause id="sec-aggregate-error">
        <h1><span class="secnum">2.4.1.1</span> AggregateError ( <var>errors</var>, <var>message</var> )</h1>
        <p>When the <emu-val>AggregateError</emu-val> function is called with arguments <var>errors</var> and <var>message</var>, the following steps are taken:</p>
        <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, let <var>newTarget</var> be the <emu-xref href="#active-function-object"><a href="https://tc39.es/ecma262/#active-function-object">active function object</a></emu-xref>, else let <var>newTarget</var> be NewTarget.</li><li>Let <var>O</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_11"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>newTarget</var>, <code>"%AggregateError.prototype%"</code>, « [[ErrorData]] »).</li><li>If <var>message</var> is not <var>undefined</var>, then<ol><li>Let <var>msg</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_12"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>message</var>).</li><li>Let <var>msgDesc</var> be the PropertyDescriptor { [[Value]]: <var>msg</var>, [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</li><li>Perform !&nbsp;<emu-xref aoid="DefinePropertyOrThrow" id="_ref_13"><a href="https://tc39.es/ecma262/#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"message"</emu-val>, <var>msgDesc</var>).</li></ol></li><li>Let <var>errorsList</var> be ?&nbsp;<emu-xref aoid="IterableToList" id="_ref_14"><a href="#sec-iterabletolist">IterableToList</a></emu-xref>(<var>errors</var>).</li><li>Perform !&nbsp;<emu-xref aoid="DefinePropertyOrThrow" id="_ref_15"><a href="https://tc39.es/ecma262/#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>O</var>, <code>"errors"</code>, <emu-xref href="#sec-property-descriptor-specification-type"><a href="https://tc39.es/ecma262/#sec-property-descriptor-specification-type">Property Descriptor</a></emu-xref> { [[Configurable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Writable]]: <emu-val>true</emu-val>, [[Value]]: !&nbsp;<emu-xref aoid="CreateArrayFromList" id="_ref_16"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>errorsList</var>) }).</li><li>Return <var>O</var>.</li></ol></emu-alg>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-aggregate-error-constructors">
      <h1><span class="secnum">2.4.2</span> Properties of the AggregateError Constructor</h1>
      <p>The AggregateError <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>has a [[Prototype]] internal slot whose value is the intrinsic object <emu-xref href="#sec-error-constructor"><a href="https://tc39.es/ecma262/#sec-error-constructor">%Error%</a></emu-xref>.</li>
        <li>has the following properties:</li>
      </ul>

      <emu-clause id="sec-aggregate-error.prototype">
        <h1><span class="secnum">2.4.2.1</span> AggregateError.prototype</h1>
        <p>The initial value of <code>AggregateError.prototype</code> is the intrinsic object <emu-xref href="#sec-properties-of-the-aggregate-error-prototype-objects" id="_ref_17"><a href="#sec-properties-of-the-aggregate-error-prototype-objects">%AggregateError.prototype%</a></emu-xref>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-aggregate-error-prototype-objects">
      <h1><span class="secnum">2.4.3</span> Properties of the AggregateError Prototype Object</h1>
      <p>The AggregateError prototype object:</p>
      <ul>
        <li>is the intrinsic object <dfn>%AggregateError.prototype%</dfn>.</li>
        <li>is an ordinary object.</li>
        <li>is not an Error instance or an AggregateError instance and does not have an [[ErrorData]] internal slot.</li>
        <li>has a [[Prototype]] internal slot whose value is the intrinsic object %Error.prototype%.</li>
      </ul>

      <emu-clause id="sec-aggregate-error.prototype.constructor">
        <h1><span class="secnum">2.4.3.1</span> AggregateError.prototype.constructor</h1>
        <p>The initial value of <code>AggregateError.prototype.constructor</code> is the intrinsic object <emu-xref href="#sec-aggregate-error-constructor" id="_ref_18"><a href="#sec-aggregate-error-constructor">%AggregateError%</a></emu-xref>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
      </emu-clause>

      <emu-clause id="sec-aggregate-error.prototype.message">
        <h1><span class="secnum">2.4.3.2</span> AggregateError.prototype.message</h1>
        <p>The initial value of <code>AggregateError.prototype.message</code> is the empty String.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
      </emu-clause>

      <emu-clause id="sec-aggregate-error.prototype.name">
        <h1><span class="secnum">2.4.3.3</span> AggregateError.prototype.name</h1>
        <p>The initial value of <code>AggregateError.prototype.name</code> is <code>"AggregateError"</code>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-aggregate-error-instances">
      <h1><span class="secnum">2.4.4</span> Properties of AggregateError Instances</h1>
      <p>AggregateError instances are ordinary objects that inherit properties from their AggregateError prototype object and have an [[ErrorData]] internal slot whose value is <emu-val>undefined</emu-val>. The only specified use of [[ErrorData]] is by <code>Object.prototype.toString</code> (<emu-xref href="#sec-object.prototype.tostring"><a href="https://tc39.es/ecma262/#sec-object.prototype.tostring">19.1.3.6</a></emu-xref>) to identify Error, AggregateError, or <var>NativeError</var> instances.</p>
    </emu-clause>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-promise.any">
  <h1><span class="secnum">3</span> Promise.any ( <var>iterable</var> )</h1>
  <p>The <code>any</code> function returns a promise that is fulfilled by the first given promise to be fulfilled, or rejected with an <code>AggregateError</code> holding the rejection reasons if all of the given promises are rejected. It resolves all elements of the passed iterable to promises as it runs this algorithm.</p>
  <emu-alg><ol><li>Let <var>C</var> be the <emu-val>this</emu-val> value.</li><li>Let <var>promiseCapability</var> be ?&nbsp;<emu-xref aoid="NewPromiseCapability" id="_ref_19"><a href="https://tc39.es/ecma262/#sec-newpromisecapability">NewPromiseCapability</a></emu-xref>(<var>C</var>).</li><li>Let <var>promiseResolve</var> be GetPromiseResolve(<var>C</var>).</li><li><emu-xref aoid="IfAbruptRejectPromise" id="_ref_20"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>promiseResolve</var>, <var>promiseCapability</var>).</li><li>Let <var>iteratorRecord</var> be <emu-xref aoid="GetIterator" id="_ref_21"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>iterable</var>).</li><li><emu-xref aoid="IfAbruptRejectPromise" id="_ref_22"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>iteratorRecord</var>, <var>promiseCapability</var>).</li><li>Let <var>result</var> be <emu-xref aoid="PerformPromiseAny" id="_ref_23"><a href="#sec-performpromiseany">PerformPromiseAny</a></emu-xref>(<var>iteratorRecord</var>, <var>C</var>, <var>promiseCapability</var>, <var>promiseResolve</var>).</li><li>If <var>result</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>If <var>iteratorRecord</var>.[[Done]] is <emu-val>false</emu-val>, set <var>result</var> to <emu-xref aoid="IteratorClose" id="_ref_24"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iteratorRecord</var>, <var>result</var>).</li><li><emu-xref aoid="IfAbruptRejectPromise" id="_ref_25"><a href="https://tc39.es/ecma262/#sec-ifabruptrejectpromise">IfAbruptRejectPromise</a></emu-xref>(<var>result</var>, <var>promiseCapability</var>).</li></ol></li><li>Return <emu-xref aoid="Completion" id="_ref_26"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>result</var>).</li></ol></emu-alg>
  <emu-note><span class="note">Note</span><div class="note-contents">
    <p>The <code>any</code> function requires its <emu-val>this</emu-val> value to be a <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> function that supports the parameter conventions of the <code>Promise</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>.</p>
  </div></emu-note>

  <emu-clause id="sec-performpromiseany" aoid="PerformPromiseAny">
    <h1><span class="secnum">3.1</span> Runtime Semantics: PerformPromiseAny ( <var>iteratorRecord</var>, <var>constructor</var>, <var>resultCapability</var>, <var>promiseResolve</var> )</h1>
    <p>When the PerformPromiseAny abstract operation is called with arguments <var>iteratorRecord</var>, <var>constructor</var>, <var>resultCapability</var>, and <var>promiseResolve</var>, the following steps are taken:</p>
    <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: !&nbsp;<emu-xref aoid="IsConstructor" id="_ref_27"><a href="https://tc39.es/ecma262/#sec-isconstructor">IsConstructor</a></emu-xref>(<var>constructor</var>) is <emu-val>true</emu-val>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>resultCapability</var> is a PromiseCapability <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: !&nbsp;<emu-xref aoid="IsCallable" id="_ref_28"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>promiseResolve</var>) is <emu-val>true</emu-val>.</li><li>Let <var>errors</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>remainingElementsCount</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Value]]: 1 }.</li><li>Let <var>index</var> be 0.</li><li>Repeat,<ol><li>Let <var>next</var> be <emu-xref aoid="IteratorStep" id="_ref_29"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iteratorRecord</var>).</li><li>If <var>next</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li><emu-xref aoid="ReturnIfAbrupt" id="_ref_30"><a href="https://tc39.es/ecma262/#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>next</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, then<ol><li>Set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] - 1.</li><li>If <var>remainingElementsCount</var>.[[Value]] is 0, then<ol><li>Let <var>error</var> be a newly created <code>AggregateError</code> object.</li><li>Perform !&nbsp;<emu-xref aoid="DefinePropertyOrThrow" id="_ref_31"><a href="https://tc39.es/ecma262/#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>error</var>, <code>"errors"</code>, <emu-xref href="#sec-property-descriptor-specification-type"><a href="https://tc39.es/ecma262/#sec-property-descriptor-specification-type">Property Descriptor</a></emu-xref> { [[Configurable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Writable]]: <emu-val>true</emu-val>, [[Value]]: !&nbsp;<emu-xref aoid="CreateArrayFromList" id="_ref_32"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>errors</var>) }).</li><li>Return <emu-xref aoid="ThrowCompletion" id="_ref_33"><a href="https://tc39.es/ecma262/#sec-throwcompletion">ThrowCompletion</a></emu-xref>(<var>error</var>).</li></ol></li><li>Return <var>resultCapability</var>.[[Promise]].</li></ol></li><li>Let <var>nextValue</var> be <emu-xref aoid="IteratorValue" id="_ref_34"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>If <var>nextValue</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li><emu-xref aoid="ReturnIfAbrupt" id="_ref_35"><a href="https://tc39.es/ecma262/#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>nextValue</var>).</li><li>Append <emu-val>undefined</emu-val> to <var>errors</var>.</li><li>Let <var>nextPromise</var> be ?&nbsp;<emu-xref aoid="Call" id="_ref_36"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>promiseResolve</var>, <var>constructor</var>, « <var>nextValue</var> »).</li><li>Let <var>steps</var> be the algorithm steps defined in <emu-xref href="#sec-promise.any-reject-element-functions" title="" id="_ref_6"><a href="#sec-promise.any-reject-element-functions"><code>Promise.any</code> Reject Element Functions</a></emu-xref>.</li><li>Let <var>rejectElement</var> be !&nbsp;<emu-xref aoid="CreateBuiltinFunction" id="_ref_37"><a href="https://tc39.es/ecma262/#sec-createbuiltinfunction">CreateBuiltinFunction</a></emu-xref>(<var>steps</var>, « [[AlreadyCalled]], [[Index]], [[Errors]], [[Capability]], [[RemainingElements]] »).</li><li>Set <var>rejectElement</var>.[[AlreadyCalled]] to a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Value]]: <emu-val>false</emu-val> }.</li><li>Set <var>rejectElement</var>.[[Index]] to <var>index</var>.</li><li>Set <var>rejectElement</var>.[[Errors]] to <var>errors</var>.</li><li>Set <var>rejectElement</var>.[[Capability]] to <var>resultCapability</var>.</li><li>Set <var>rejectElement</var>.[[RemainingElements]] to <var>remainingElementsCount</var>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] + 1.</li><li>Perform ?&nbsp;<emu-xref aoid="Invoke" id="_ref_38"><a href="https://tc39.es/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>nextPromise</var>, <code>"then"</code>, « <var>resultCapability</var>.[[Resolve]], <var>rejectElement</var> »).</li><li>Increase <var>index</var> by 1.</li></ol></li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="sec-promise.any-reject-element-functions">
    <h1><span class="secnum">3.2</span> <code>Promise.any</code> Reject Element Functions</h1>
    <p>A <code>Promise.any</code> reject element function is an anonymous built-in function that is used to reject a specific <code>Promise.any</code> element. Each <code>Promise.any</code> reject element function has [[Index]], [[Errors]], [[Capability]], [[RemainingElements]], and [[AlreadyCalled]] internal slots.</p>
    <p>When a <code>Promise.any</code> reject element function is called with argument <var>x</var>, the following steps are taken:</p>
    <emu-alg><ol><li>Let <var>F</var> be the <emu-xref href="#active-function-object"><a href="https://tc39.es/ecma262/#active-function-object">active function object</a></emu-xref>.</li><li>Let <var>alreadyCalled</var> be <var>F</var>.[[AlreadyCalled]].</li><li>If <var>alreadyCalled</var>.[[Value]] is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Set <var>alreadyCalled</var>.[[Value]] to <emu-val>true</emu-val>.</li><li>Let <var>index</var> be <var>F</var>.[[Index]].</li><li>Let <var>errors</var> be <var>F</var>.[[Errors]].</li><li>Let <var>promiseCapability</var> be <var>F</var>.[[Capability]].</li><li>Let <var>remainingElementsCount</var> be <var>F</var>.[[RemainingElements]].</li><li>Set <var>errors</var>[<var>index</var>] to <var>x</var>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] - 1.</li><li>If <var>remainingElementsCount</var>.[[Value]] is 0, then<ol><li>Let <var>error</var> be a newly created <code>AggregateError</code> object.</li><li>Perform !&nbsp;<emu-xref aoid="DefinePropertyOrThrow" id="_ref_39"><a href="https://tc39.es/ecma262/#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>error</var>, <code>"errors"</code>, <emu-xref href="#sec-property-descriptor-specification-type"><a href="https://tc39.es/ecma262/#sec-property-descriptor-specification-type">Property Descriptor</a></emu-xref> { [[Configurable]]: <emu-val>true</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Writable]]: <emu-val>true</emu-val>, [[Value]]: !&nbsp;<emu-xref aoid="CreateArrayFromList" id="_ref_40"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>errors</var>) }).</li><li>Return ?&nbsp;<emu-xref aoid="Call" id="_ref_41"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(<var>promiseCapability</var>.[[Reject]], undefined, « <var>error</var> »).</li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>
    <p>The <code>"length"</code> property of a <code>Promise.any</code> reject element function is 1.</p>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-iterabletolist" aoid="IterableToList">
  <h1><span class="secnum">4</span> Runtime Semantics: IterableToList ( <var>items</var> <ins>[ ,</ins> <var>method</var><ins> ]</ins> )</h1>
  <p>The abstract operation IterableToList performs the following steps:</p>
  <emu-alg><ol><li><del>Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator" id="_ref_42"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>items</var>, <emu-const>sync</emu-const>, <var>method</var>).</del></li><li><ins>If <var>method</var> is present, then</ins><ol><li><ins>Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator" id="_ref_43"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>items</var>, <emu-const>sync</emu-const>, <var>method</var>).</ins></li></ol></li><li><ins>Else,</ins><ol><li><ins>Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator" id="_ref_44"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>items</var>, <emu-const>sync</emu-const>).</ins></li></ol></li><li>Let <var>values</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>next</var> be <emu-val>true</emu-val>.</li><li>Repeat, while <var>next</var> is not <emu-val>false</emu-val><ol><li>Set <var>next</var> to ?&nbsp;<emu-xref aoid="IteratorStep" id="_ref_45"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iteratorRecord</var>).</li><li>If <var>next</var> is not <emu-val>false</emu-val>, then<ol><li>Let <var>nextValue</var> be ?&nbsp;<emu-xref aoid="IteratorValue" id="_ref_46"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Append <var>nextValue</var> to the end of the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> <var>values</var>.</li></ol></li></ol></li><li>Return <var>values</var>.</li></ol></emu-alg>
</emu-clause>
</div></body>